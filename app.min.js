document.addEventListener("DOMContentLoaded",()=>{const pads=document.querySelectorAll(".pad"),allAudio=document.querySelectorAll("audio"),a1=document.getElementById("a1").childNodes[1],a2=document.getElementById("a2").childNodes[1],a3=document.getElementById("a3").childNodes[1],a4=document.getElementById("a4").childNodes[1],a5=document.getElementById("a5").childNodes[1],a6=document.getElementById("a6").childNodes[1],a7=document.getElementById("a7").childNodes[1],a8=document.getElementById("a8").childNodes[1],b1=document.getElementById("b1").childNodes[1],b2=document.getElementById("b2").childNodes[1],b3=document.getElementById("b3").childNodes[1],b4=document.getElementById("b4").childNodes[1],b5=document.getElementById("b5").childNodes[1],b6=document.getElementById("b6").childNodes[1],b7=document.getElementById("b7").childNodes[1],b8=document.getElementById("b8").childNodes[1],c1=document.getElementById("c1").childNodes[1],c2=document.getElementById("c2").childNodes[1],c3=document.getElementById("c3").childNodes[1],c4=document.getElementById("c4").childNodes[1],c5=document.getElementById("c5").childNodes[1],c6=document.getElementById("c6").childNodes[1],c7=document.getElementById("c7").childNodes[1],c8=document.getElementById("c8").childNodes[1],d1=document.getElementById("d1").childNodes[1],d2=document.getElementById("d2").childNodes[1],d3=document.getElementById("d3").childNodes[1],d4=document.getElementById("d4").childNodes[1],d5=document.getElementById("d5").childNodes[1],d6=document.getElementById("d6").childNodes[1],d7=document.getElementById("d7").childNodes[1],d8=document.getElementById("d8").childNodes[1],e1=document.getElementById("e1").childNodes[1],e2=document.getElementById("e2").childNodes[1],e3=document.getElementById("e3").childNodes[1],e4=document.getElementById("e4").childNodes[1],e5=document.getElementById("e5").childNodes[1],e6=document.getElementById("e6").childNodes[1],e7=document.getElementById("e7").childNodes[1],e8=document.getElementById("e8").childNodes[1],f1=document.getElementById("f1").childNodes[1],f2=document.getElementById("f2").childNodes[1],f3=document.getElementById("f3").childNodes[1],f4=document.getElementById("f4").childNodes[1],f5=document.getElementById("f5").childNodes[1],f6=document.getElementById("f6").childNodes[1],f7=document.getElementById("f7").childNodes[1],f8=document.getElementById("f8").childNodes[1],g1=document.getElementById("g1").childNodes[1],g2=document.getElementById("g2").childNodes[1],g3=document.getElementById("g3").childNodes[1],g4=document.getElementById("g4").childNodes[1],g5=document.getElementById("g5").childNodes[1],g6=document.getElementById("g6").childNodes[1],g7=document.getElementById("g7").childNodes[1],g8=document.getElementById("g8").childNodes[1],h1=document.getElementById("h1").childNodes[1],h2=document.getElementById("h2").childNodes[1],h3=document.getElementById("h3").childNodes[1],h4=document.getElementById("h4").childNodes[1],h5=document.getElementById("h5").childNodes[1],h6=document.getElementById("h6").childNodes[1],h7=document.getElementById("h7").childNodes[1],h8=document.getElementById("h8").childNodes[1],modifierVol=document.getElementById("right1"),modifierQuadChoke=document.getElementById("right2"),modifierChoke=document.getElementById("right3"),modifierMute=document.getElementById("right4"),modifierStop=document.getElementById("right5"),modifier6=document.getElementById("right6"),modifier7=document.getElementById("right7"),modifierMenu=document.getElementById("right8"),q1=document.querySelectorAll(".quad1"),q2=document.querySelectorAll(".quad2"),q3=document.querySelectorAll(".quad3"),q4=document.querySelectorAll(".quad4"),stopIcon=document.querySelector(".stop-icon"),muteIcon=document.querySelector(".mute-icon"),chokeIcon=document.querySelector(".choke-icon"),quadChokeIcon=document.querySelector(".qchoke-icon"),menuIcon=document.querySelector(".menu-icon"),menuCloseIcon=document.getElementById("menu-close-icon"),sampleMenu=document.querySelector(".sample-menu-container"),closeMenu=document.getElementById("menu-close");var choke=!1;for(i=0;i<pads.length;i++){var pad;pads[i].addEventListener("click",e=>{if(e.preventDefault(),!1===choke?stopThisAudio(e):stopAllAudio(),e.target.hasChildNodes()&&"AUDIO"===e.target.childNodes[1].tagName&&e.target.childNodes[1].play(),modifierQuadChoke.classList.contains("light-grey")){var cls=e.target.classList;switch(!0){case cls.contains("quad1"):for(i=0;i<q1.length;i++)q1[i].childNodes[1].pause(),q1[i].childNodes[1].currentTime=0;break;case cls.contains("quad2"):for(i=0;i<q2.length;i++)q2[i].childNodes[1].pause(),q2[i].childNodes[1].currentTime=0;break;case cls.contains("quad3"):for(i=0;i<q3.length;i++)q3[i].childNodes[1].pause(),q3[i].childNodes[1].currentTime=0;break;case cls.contains("quad4"):for(i=0;i<q4.length;i++)q4[i].childNodes[1].pause(),q4[i].childNodes[1].currentTime=0}}padLightClick(e)},!1)}function stopAllAudio(){allAudio.forEach((function(audio){audio.pause(),audio.currentTime=0}))}function stopThisAudio(e){"AUDIO"===e.target.childNodes[1]&&(e.target.childNodes[1].pause(),e.target.childNodes[1].currentTime=0)}function padLightClick(e){e.target.hasChildNodes()&&(e.target.childNodes[1].onplay=function(){var cls=e.target.classList;switch(!0){case cls.contains("quad1"):e.target.classList.add("red");break;case cls.contains("quad2"):e.target.classList.add("blue");break;case cls.contains("quad3"):e.target.classList.add("green");break;case cls.contains("quad4"):e.target.classList.add("yellow")}},e.target.childNodes[1].onended=function(){var cls=e.target.classList;switch(!0){case cls.contains("quad1"):e.target.classList.remove("red");break;case cls.contains("quad2"):e.target.classList.remove("blue");break;case cls.contains("quad3"):e.target.classList.remove("green");break;case cls.contains("quad4"):e.target.classList.remove("yellow")}},e.target.childNodes[1].onpause=function(){var cls=e.target.classList;switch(!0){case cls.contains("quad1"):e.target.classList.remove("red");break;case cls.contains("quad2"):e.target.classList.remove("blue");break;case cls.contains("quad3"):e.target.classList.remove("green");break;case cls.contains("quad4"):e.target.classList.remove("yellow")}})}function padLightKey(){p.onplay=function(){var cls=this.parentNode.classList;switch(!0){case cls.contains("quad1"):this.parentNode.classList.add("red");break;case cls.contains("quad2"):this.parentNode.classList.add("blue");break;case cls.contains("quad3"):this.parentNode.classList.add("green");break;case cls.contains("quad4"):this.parentNode.classList.add("yellow")}},p.onended=function(){var cls=this.parentNode.classList;switch(!0){case cls.contains("quad1"):this.parentNode.classList.remove("red");break;case cls.contains("quad2"):this.parentNode.classList.remove("blue");break;case cls.contains("quad3"):this.parentNode.classList.remove("green");break;case cls.contains("quad4"):this.parentNode.classList.remove("yellow")}},p.onpause=function(){var cls=this.parentNode.classList;switch(!0){case cls.contains("quad1"):this.parentNode.classList.remove("red");break;case cls.contains("quad2"):this.parentNode.classList.remove("blue");break;case cls.contains("quad3"):this.parentNode.classList.remove("green");break;case cls.contains("quad4"):this.parentNode.classList.remove("yellow")}}}function padKeyExec(){if(modifierQuadChoke.classList.contains("light-grey")){var cls=p.parentNode.classList;switch(!0){case cls.contains("quad1"):for(i=0;i<q1.length;i++)q1[i].childNodes[1].pause(),q1[i].childNodes[1].currentTime=0;break;case cls.contains("quad2"):for(i=0;i<q2.length;i++)q2[i].childNodes[1].pause(),q2[i].childNodes[1].currentTime=0;break;case cls.contains("quad3"):for(i=0;i<q3.length;i++)q3[i].childNodes[1].pause(),q3[i].childNodes[1].currentTime=0;break;case cls.contains("quad4"):for(i=0;i<q4.length;i++)q4[i].childNodes[1].pause(),q4[i].childNodes[1].currentTime=0}}!1===choke?(p.pause(),p.currentTime=0):stopAllAudio(),p.play(),padLightKey()}function globalStop(){modifierStop.classList.add("light-grey"),stopIcon.classList.add("grey"),setTimeout(()=>{modifierStop.classList.remove("light-grey"),stopIcon.classList.remove("grey")},500),stopAllAudio()}function globalMute(){modifierMute.classList.toggle("light-grey"),muteIcon.classList.toggle("grey"),allAudio.forEach((function(audio){!0===audio.muted?audio.muted=!1:audio.muted=!0}))}function globalChoke(){modifierChoke.classList.toggle("light-grey"),chokeIcon.classList.toggle("grey"),choke=!0!==choke}function quadChoke(){modifierQuadChoke.classList.toggle("light-grey"),quadChokeIcon.classList.toggle("grey")}document.addEventListener("keydown",e=>{e.preventDefault();var key=e.key||e.keyCode;switch(e.keyCode){case 112:p=a1,padKeyExec();break;case 113:p=a2,padKeyExec();break;case 114:p=a3,padKeyExec();break;case 115:p=a4,padKeyExec();break;case 116:p=b1,padKeyExec();break;case 117:p=b2,padKeyExec();break;case 118:p=b3,padKeyExec();break;case 119:p=b4,padKeyExec();break;case 120:p=c1,padKeyExec();break;case 121:p=c2,padKeyExec();break;case 122:p=c3,padKeyExec();break;case 123:p=c4,padKeyExec();break;case 124:p=d1,padKeyExec();break;case 125:p=d2,padKeyExec();break;case 126:p=d3,padKeyExec();break;case 127:p=d4,padKeyExec();break;case 111:p=a5,padKeyExec();break;case 106:p=a6,padKeyExec();break;case 109:p=a7,padKeyExec();break;case 107:p=a8,padKeyExec();break;case 33:p=b5,padKeyExec();break;case 39:p=b6,padKeyExec();break;case 34:p=b7,padKeyExec();break;case 46:p=b8,padKeyExec();break;case 38:p=c5,padKeyExec();break;case 12:p=c6,padKeyExec();break;case 40:p=c7,padKeyExec();break;case 45:p=c8,padKeyExec();break;case 36:p=d5,padKeyExec();break;case 37:p=d6,padKeyExec();break;case 35:p=d7,padKeyExec();break;case 128:p=d8,padKeyExec();break;case 90:p=h1,padKeyExec();break;case 88:p=h2,padKeyExec();break;case 67:p=h3,padKeyExec();break;case 86:p=h4,padKeyExec();break;case 65:p=g1,padKeyExec();break;case 83:p=g2,padKeyExec();break;case 68:p=g3,padKeyExec();break;case 70:p=g4,padKeyExec();break;case 81:p=f1,padKeyExec();break;case 87:p=f2,padKeyExec();break;case 69:p=f3,padKeyExec();break;case 82:p=f4,padKeyExec();break;case 49:p=e1,padKeyExec();break;case 50:p=e2,padKeyExec();break;case 51:p=e3,padKeyExec();break;case 52:p=e4,padKeyExec();break;case 66:p=h5,padKeyExec();break;case 78:p=h6,padKeyExec();break;case 77:p=h7,padKeyExec();break;case 188:p=h8,padKeyExec();break;case 71:p=g5,padKeyExec();break;case 72:p=g6,padKeyExec();break;case 74:p=g7,padKeyExec();break;case 75:p=g8,padKeyExec();break;case 84:p=f5,padKeyExec();break;case 89:p=f6,padKeyExec();break;case 85:p=f7,padKeyExec();break;case 73:p=f8,padKeyExec();break;case 53:p=e5,padKeyExec();break;case 54:p=e6,padKeyExec();break;case 55:p=e7,padKeyExec();break;case 56:p=e8,padKeyExec();break;case 13:modifierStop.classList.add("light-grey"),document.querySelector(".stop-icon").classList.add("grey"),setTimeout(()=>{modifierStop.classList.remove("light-grey"),document.querySelector(".stop-icon").classList.remove("grey")},500),stopAllAudio();break;case 222:modifierMute.classList.toggle("light-grey"),document.querySelector(".mute-icon").classList.toggle("grey"),allAudio.forEach((function(audio){!0===audio.muted?audio.muted=!1:audio.muted=!0}));break;case 186:modifierChoke.classList.toggle("light-grey"),document.querySelector(".choke-icon").classList.toggle("grey"),choke=!0!==choke;break;case 76:if(modifierQuadChoke.classList.toggle("light-grey"),document.querySelector(".qchoke-icon").classList.toggle("grey"),modifierQuadChoke.classList.contains("light-grey")){var cls=p.parentNode.classList;switch(!0){case cls.contains("quad1"):for(i=0;i<q1.length;i++)q1[i].childNodes[1].pause(),q1[i].childNodes[1].currentTime=0;break;case cls.contains("quad2"):for(i=0;i<q2.length;i++)q2[i].childNodes[1].pause(),q2[i].childNodes[1].currentTime=0;break;case cls.contains("quad3"):for(i=0;i<q3.length;i++)q3[i].childNodes[1].pause(),q3[i].childNodes[1].currentTime=0;break;case cls.contains("quad4"):for(i=0;i<q4.length;i++)q4[i].childNodes[1].pause(),q4[i].childNodes[1].currentTime=0}}}}),modifierStop.addEventListener("click",globalStop),modifierMute.addEventListener("click",globalMute),modifierChoke.addEventListener("click",globalChoke),modifierQuadChoke.addEventListener("click",quadChoke);let feedbackVol=document.getElementById("feedback-volume"),x,y,deg=0,startX,startY,active=!1;modifierVol.addEventListener("mousedown",(function(e){active=!0,startX=e.clientX,startY=e.clientY})),window.addEventListener("mouseup",(function(e){active&&(active=!1)})),window.addEventListener("mousemove",(function(e){if(active){let diffX=e.clientX-startX,diffY=e.clientY-startY,delta=Math.abs(diffX)>Math.abs(diffY)?-diffX:diffY;deg=15*Math.round(-delta/15),deg<=0&&deg>=-150&&(modifierVol.style.transform=`rotate(${deg}deg)`,feedbackVol.style.transform=`rotate(${-deg}deg)`,feedbackVol.innerHTML=(1+deg/150).toFixed(1),allAudio.forEach((function(audio){audio.volume=1+deg/150})))}})),modifierMenu.addEventListener("click",(function(){modifierMenu.classList.add("light-grey"),menuIcon.classList.add("grey"),menuIcon.style.transform="rotate(-45deg)",menuCloseIcon.style.transform="rotate(-45deg)",setTimeout(()=>{modifierMenu.classList.remove("light-grey"),menuIcon.classList.remove("grey"),menuIcon.style.transform="rotate(90deg)"},500),sampleMenu.style.visibility="visible",sampleMenu.classList.add("sample-menu-open")})),closeMenu.addEventListener("click",(function(){sampleMenu.classList.remove("sample-menu-open"),menuCloseIcon.style.transform="rotate(90deg)",setTimeout(()=>{sampleMenu.style.visibility="hidden"},170)}));const sampleFileSelects=document.querySelectorAll(".sample-file-select"),samples=document.querySelectorAll("audio");for(i=0;i<sampleFileSelects.length;i++)(index=>{sampleFileSelects[i].addEventListener("change",(function(){var files=this.files;samples[index].setAttribute("src",URL.createObjectURL(files[0])),samples[index].load()}),!1)})(i);function success(midi){for(var inputs=midi.inputs.values(),input=inputs.next();input&&!input.done;input=inputs.next())input.value.onmidimessage=onMIDIMessage}function failure(){console.error("No access to your midi devices.")}function onMIDIMessage(message){console.log(message.data),144===message.data[0]&&message.data[2]>0&&allAudio.forEach(audio=>{audio.getAttribute("data-midi")==message.data[1]&&(!1===choke?(audio.pause(),audio.currentTime="0"):stopAllAudio(),audio.play(),audio.onplay=function(){var cls=this.parentNode.classList;switch(!0){case cls.contains("quad1"):this.parentNode.classList.add("red");break;case cls.contains("quad2"):this.parentNode.classList.add("blue");break;case cls.contains("quad3"):this.parentNode.classList.add("green");break;case cls.contains("quad4"):this.parentNode.classList.add("yellow")}},audio.onended=function(){var cls=this.parentNode.classList;switch(!0){case cls.contains("quad1"):this.parentNode.classList.remove("red");break;case cls.contains("quad2"):this.parentNode.classList.remove("blue");break;case cls.contains("quad3"):this.parentNode.classList.remove("green");break;case cls.contains("quad4"):this.parentNode.classList.remove("yellow")}},audio.onpause=function(){var cls=this.parentNode.classList;switch(!0){case cls.contains("quad1"):this.parentNode.classList.remove("red");break;case cls.contains("quad2"):this.parentNode.classList.remove("blue");break;case cls.contains("quad3"):this.parentNode.classList.remove("green");break;case cls.contains("quad4"):this.parentNode.classList.remove("yellow")}})})}navigator.requestMIDIAccess&&navigator.requestMIDIAccess().then(success,failure)});